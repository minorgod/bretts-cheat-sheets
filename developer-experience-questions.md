# Experience Programming Questions

The follwing are real world problem solving questions and answers from years in the trenches.

**Question:** What's a monorepo and why would you want one? 

**Answer:** It's a repository (usually a frontend repo) where there are multiple modules that live under a main module and may or may not share many of its packages. The benefits come when they do share many packages and you are building a frontend package with webpack or similar build tools. Because they share a common parent. webpack can effectivley tree-shake the code to consolidate and remove duplicate dependencies in the dist files. The build will be smaller and more effiecient. 



**Question:** A web app build is messed up. It uses webpack (with npm, not Yarn) as the package manager. It's a monrepo. When you run npm install in the main parent module everything works fine. You can run the local dev server start script in the submodules, jest tests run from the main module pass in the main module and all submodules. However, when you run npm install in any of the submodules, suddenly the tests fail with obscure errors about Enzyme adapters not being configured, modules are packages/modules not found, and the console is blowing up with errors during Jest tests saying there may be mismatched version of react or react-dom. Mocked moment.js objects forget what time it is, and mocked classname generators for jscss start generating the wrong classnames half way through a test. What do you do?

**Answer:** Remove all dependencies and devDependencies from the submodules. Run npm install in each of them. Run jest test in each of them. Run the local dev server start command in each of them. They will produce errors about missing modules. Install only the missing modules as either peerDependencies or devDependencies. If they are not already installed in the main module, install them in the main module's devDependencies, or if they are only used in the submodule, install them in the submodule's devDependencies. Do this until all submodules local dev server starts and runs, and all jest tests run the same way they run in the main module. If you continue to have issues with your classname generators producing dynamic classnames instead of deterministic classnames, check your babel config. if you have babel configs in any of the submodules, remove them and change your webpack.config.js configuration of babel-loader to use rootMode: "upwards" so all child modules use the main babel config. While you're at it, maybe consider removing all babel plugins and then running your build and re-adding the needed plugins until the build succeeds. Your project problems should now be solved. Congratulations, you are done. Commit your new package.json and pacakge-lock.json files (and possibly babel config) and go celebrate in whatever way you like to celebrate solving intractable problems. 